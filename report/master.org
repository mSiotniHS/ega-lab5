#+TITLE: Отчёт по лабораторной работе №5
#+SUBTITLE: Артём Абрамян, 382007-1
#+AUTHOR: Артём Абрамян
#+LANGUAGE: ru
#+OPTIONS: toc:nil author:nil date:nil timestamp:nil
#+HTML_HEAD: <style>:root{ font-family: "IBM Plex Sans"; line-height: 1.5;} pre{font-family: "Iosevka";font-size:13px;} .src{ background-color: #3c3c3c; color: white }</style>

* Блок-схема алгоритма

#+ATTR_HTML: :width 60%
[[./flowchart.png]]

* Матрица расстояний 5 \times 5

** Матрица

| Города | 0 | 1 | 2 | 3 | 4 |
|--------+---+---+---+---+---|
|      0 | 0 | 3 | 5 | 7 | 4 |
|      1 | 3 | 0 | 1 | 4 | 2 |
|      2 | 5 | 1 | 0 | 6 | 6 |
|      3 | 7 | 4 | 6 | 0 | 3 |
|      4 | 4 | 2 | 6 | 3 | 0 |

** Запуски

*** Запуск 1

#+BEGIN_src
> Итерация №1  |  Текущий маршрут: 2
> Отобранный город: 1, расстояние: 1
> Текущее расстояние: 1

> Итерация №2  |  Текущий маршрут: 2 -> 1
> Отобранный город: 4, расстояние: 2
> Текущее расстояние: 3

> Итерация №3  |  Текущий маршрут: 2 -> 1 -> 4
> Отобранный город: 3, расстояние: 3
> Текущее расстояние: 6

> Итерация №4  |  Текущий маршрут: 2 -> 1 -> 4 -> 3
> Отобранный город: 0, расстояние: 7
> Текущее расстояние: 13

Маршрут: 2 -> 1 -> 4 -> 3 -> 0
Расстояние: 18
#+END_src

*** Запуск 2

#+BEGIN_src
> Итерация №1  |  Текущий маршрут: 3
> Отобранный город: 4, расстояние: 3
> Текущее расстояние: 3

> Итерация №2  |  Текущий маршрут: 3 -> 4
> Отобранный город: 1, расстояние: 2
> Текущее расстояние: 5

> Итерация №3  |  Текущий маршрут: 3 -> 4 -> 1
> Отобранный город: 2, расстояние: 1
> Текущее расстояние: 6

> Итерация №4  |  Текущий маршрут: 3 -> 4 -> 1 -> 2
> Отобранный город: 0, расстояние: 5
> Текущее расстояние: 11

Маршрут: 3 -> 4 -> 1 -> 2 -> 0
Расстояние: 18
#+END_src

*** Запуск 3

#+BEGIN_src
> Итерация №1  |  Текущий маршрут: 0
> Отобранный город: 1, расстояние: 3
> Текущее расстояние: 3

> Итерация №2  |  Текущий маршрут: 0 -> 1
> Отобранный город: 2, расстояние: 1
> Текущее расстояние: 4

> Итерация №3  |  Текущий маршрут: 0 -> 1 -> 2
> Отобранный город: 3, расстояние: 6
> Текущее расстояние: 10

> Итерация №4  |  Текущий маршрут: 0 -> 1 -> 2 -> 3
> Отобранный город: 4, расстояние: 3
> Текущее расстояние: 13

Маршрут: 0 -> 1 -> 2 -> 3 -> 4
Расстояние: 17
#+END_src

** Результаты запусков

| Запуск | Маршрут                   | Расстояние |
|--------+---------------------------+------------|
|      1 | 2 \to 1 \to 4 \to 3 \to 0 |         18 |
|      2 | 3 \to 4 \to 1 \to 2 \to 0 |         18 |
|      3 | 0 \to 1 \to 2 \to 3 \to 4 |         17 |

Лучшее решение: 0 \to 1 \to 2 \to 3 \to 4 (17).

* Матрица расстояний 15 \times 15

** Матрица

| Города |  0 |  1 |  2 |  3 |  4 |  5 |  6 |  7 |  8 |  9 | 10 | 11 | 12 | 13 | 14 |
|--------+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----|
|      0 |  0 |  9 | 12 |  3 |  6 | 12 | 17 | 20 |  6 |  9 | 11 | 19 |  5 |  9 | 10 |
|      1 |  9 |  0 |  3 | 10 | 15 | 10 |  6 |  9 | 15 | 18 | 20 |  8 | 14 | 18 | 19 |
|      2 | 12 |  3 |  0 | 13 | 18 |  3 |  3 |  6 | 18 | 21 | 23 | 11 | 17 | 21 | 22 |
|      3 |  3 | 10 | 13 |  0 |  5 | 16 | 21 | 24 | 10 | 13 | 15 | 23 |  9 | 13 | 14 |
|      4 |  6 | 15 | 18 |  5 |  0 | 19 | 24 | 27 | 13 | 16 | 18 | 26 | 12 | 16 | 17 |
|      5 | 12 | 10 |  3 | 16 | 19 |  0 |  5 |  8 | 19 | 22 | 24 | 12 | 18 | 22 | 23 |
|      6 | 17 |  6 |  3 | 21 | 24 |  5 |  0 |  3 | 24 | 27 | 29 | 17 | 23 | 27 | 28 |
|      7 | 20 |  9 |  6 | 24 | 27 |  8 |  3 |  0 | 27 | 30 | 32 | 20 | 26 | 30 | 31 |
|      8 |  6 | 15 | 18 | 10 | 13 | 19 | 24 | 27 |  0 |  3 |  5 | 13 |  1 |  5 |  6 |
|      9 |  9 | 18 | 21 | 13 | 16 | 22 | 27 | 30 |  3 |  0 |  2 | 10 |  4 |  8 |  9 |
|     10 | 11 | 20 | 23 | 15 | 18 | 24 | 29 | 32 |  5 |  2 |  0 |  8 |  6 | 10 | 11 |
|     11 | 19 |  8 | 11 | 23 | 26 | 12 | 17 | 20 | 13 | 10 |  8 |  0 | 14 | 10 |  9 |
|     12 |  5 | 14 | 17 |  9 | 12 | 18 | 23 | 26 |  1 |  4 |  6 | 14 |  0 |  4 |  5 |
|     13 |  9 | 18 | 21 | 13 | 16 | 22 | 27 | 30 |  5 |  8 | 10 | 10 |  4 |  0 |  1 |
|     14 | 10 | 19 | 22 | 14 | 17 | 23 | 28 | 31 |  6 |  9 | 11 |  9 |  5 |  1 |  0 |

** Запуски

*** Запуск 1

#+BEGIN_src
> Итерация №1  |  Текущий: 2
> Отобранный город: 1, расстояние: 3
> Текущее расстояние: 3

> Итерация №2  |  Текущий: 2 -> 1
> Отобранный город: 6, расстояние: 6
> Текущее расстояние: 9

> Итерация №3  |  Текущий: 2 -> 1 -> 6
> Отобранный город: 7, расстояние: 3
> Текущее расстояние: 12

> Итерация №4  |  Текущий: 2 -> 1 -> 6 -> 7
> Отобранный город: 5, расстояние: 8
> Текущее расстояние: 20

> Итерация №5  |  Текущий: 2 -> 1 -> 6 -> 7 -> 5
> Отобранный город: 0, расстояние: 12
> Текущее расстояние: 32

> Итерация №6  |  Текущий: 2 -> 1 -> 6 -> 7 -> 5 -> 0
> Отобранный город: 3, расстояние: 3
> Текущее расстояние: 35

> Итерация №7  |  Текущий: 2 -> 1 -> 6 -> 7 -> 5 -> 0 -> 3
> Отобранный город: 4, расстояние: 5
> Текущее расстояние: 40

> Итерация №8  |  Текущий: 2 -> 1 -> 6 -> 7 -> 5 -> 0 -> 3 -> 4
> Отобранный город: 12, расстояние: 12
> Текущее расстояние: 52

> Итерация №9  |  Текущий: 2 -> 1 -> 6 -> 7 -> 5 -> 0 -> 3 -> 4 -> 12
> Отобранный город: 8, расстояние: 1
> Текущее расстояние: 53

> Итерация №10  |  Текущий: 2 -> 1 -> 6 -> 7 -> 5 -> 0 -> 3 -> 4 -> 12 -> 8
> Отобранный город: 9, расстояние: 3
> Текущее расстояние: 56

> Итерация №11  |  Текущий: 2 -> 1 -> 6 -> 7 -> 5 -> 0 -> 3 -> 4 -> 12 -> 8 -> 9
> Отобранный город: 10, расстояние: 2
> Текущее расстояние: 58

> Итерация №12  |  Текущий: 2 -> 1 -> 6 -> 7 -> 5 -> 0 -> 3 -> 4 -> 12 -> 8 -> 9 -> 10
> Отобранный город: 11, расстояние: 8
> Текущее расстояние: 66

> Итерация №13  |  Текущий: 2 -> 1 -> 6 -> 7 -> 5 -> 0 -> 3 -> 4 -> 12 -> 8 -> 9 -> 10 -> 11
> Отобранный город: 14, расстояние: 9
> Текущее расстояние: 75

> Итерация №14  |  Текущий: 2 -> 1 -> 6 -> 7 -> 5 -> 0 -> 3 -> 4 -> 12 -> 8 -> 9 -> 10 -> 11 -> 14
> Отобранный город: 13, расстояние: 1
> Текущее расстояние: 76

Маршрут: 2 -> 1 -> 6 -> 7 -> 5 -> 0 -> 3 -> 4 -> 12 -> 8 -> 9 -> 10 -> 11 -> 14 -> 13
Расстояние: 97
#+END_src

*** Запуск 2

#+BEGIN_src
> Итерация №1  |  Текущий: 13
> Отобранный город: 14, расстояние: 1
> Текущее расстояние: 1

> Итерация №2  |  Текущий: 13 -> 14
> Отобранный город: 12, расстояние: 5
> Текущее расстояние: 6

> Итерация №3  |  Текущий: 13 -> 14 -> 12
> Отобранный город: 8, расстояние: 1
> Текущее расстояние: 7

> Итерация №4  |  Текущий: 13 -> 14 -> 12 -> 8
> Отобранный город: 9, расстояние: 3
> Текущее расстояние: 10

> Итерация №5  |  Текущий: 13 -> 14 -> 12 -> 8 -> 9
> Отобранный город: 10, расстояние: 2
> Текущее расстояние: 12

> Итерация №6  |  Текущий: 13 -> 14 -> 12 -> 8 -> 9 -> 10
> Отобранный город: 11, расстояние: 8
> Текущее расстояние: 20

> Итерация №7  |  Текущий: 13 -> 14 -> 12 -> 8 -> 9 -> 10 -> 11
> Отобранный город: 1, расстояние: 8
> Текущее расстояние: 28

> Итерация №8  |  Текущий: 13 -> 14 -> 12 -> 8 -> 9 -> 10 -> 11 -> 1
> Отобранный город: 2, расстояние: 3
> Текущее расстояние: 31

> Итерация №9  |  Текущий: 13 -> 14 -> 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2
> Отобранный город: 5, расстояние: 3
> Текущее расстояние: 34

> Итерация №10  |  Текущий: 13 -> 14 -> 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5
> Отобранный город: 6, расстояние: 5
> Текущее расстояние: 39

> Итерация №11  |  Текущий: 13 -> 14 -> 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6
> Отобранный город: 7, расстояние: 3
> Текущее расстояние: 42

> Итерация №12  |  Текущий: 13 -> 14 -> 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7
> Отобранный город: 0, расстояние: 20
> Текущее расстояние: 62

> Итерация №13  |  Текущий: 13 -> 14 -> 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0
> Отобранный город: 3, расстояние: 3
> Текущее расстояние: 65

> Итерация №14  |  Текущий: 13 -> 14 -> 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0 -> 3
> Отобранный город: 4, расстояние: 5
> Текущее расстояние: 70

Маршрут: 13 -> 14 -> 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0 -> 3 -> 4
Расстояние: 86
#+END_src

*** Запуск 3

#+BEGIN_src
> Итерация №1  |  Текущий: 12
> Отобранный город: 8, расстояние: 1
> Текущее расстояние: 1

> Итерация №2  |  Текущий: 12 -> 8
> Отобранный город: 9, расстояние: 3
> Текущее расстояние: 4

> Итерация №3  |  Текущий: 12 -> 8 -> 9
> Отобранный город: 10, расстояние: 2
> Текущее расстояние: 6

> Итерация №4  |  Текущий: 12 -> 8 -> 9 -> 10
> Отобранный город: 11, расстояние: 8
> Текущее расстояние: 14

> Итерация №5  |  Текущий: 12 -> 8 -> 9 -> 10 -> 11
> Отобранный город: 1, расстояние: 8
> Текущее расстояние: 22

> Итерация №6  |  Текущий: 12 -> 8 -> 9 -> 10 -> 11 -> 1
> Отобранный город: 2, расстояние: 3
> Текущее расстояние: 25

> Итерация №7  |  Текущий: 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2
> Отобранный город: 5, расстояние: 3
> Текущее расстояние: 28

> Итерация №8  |  Текущий: 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5
> Отобранный город: 6, расстояние: 5
> Текущее расстояние: 33

> Итерация №9  |  Текущий: 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6
> Отобранный город: 7, расстояние: 3
> Текущее расстояние: 36

> Итерация №10  |  Текущий: 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7
> Отобранный город: 0, расстояние: 20
> Текущее расстояние: 56

> Итерация №11  |  Текущий: 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0
> Отобранный город: 3, расстояние: 3
> Текущее расстояние: 59

> Итерация №12  |  Текущий: 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0 -> 3
> Отобранный город: 4, расстояние: 5
> Текущее расстояние: 64

> Итерация №13  |  Текущий: 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0 -> 3 -> 4
> Отобранный город: 13, расстояние: 16
> Текущее расстояние: 80

> Итерация №14  |  Текущий: 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0 -> 3 -> 4 -> 13
> Отобранный город: 14, расстояние: 1
> Текущее расстояние: 81

Маршрут: 12 -> 8 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0 -> 3 -> 4 -> 13 -> 14
Расстояние: 86
#+END_src

*** Запуск 4

#+BEGIN_src
> Итерация №1  |  Текущий: 8
> Отобранный город: 12, расстояние: 1
> Текущее расстояние: 1

> Итерация №2  |  Текущий: 8 -> 12
> Отобранный город: 9, расстояние: 4
> Текущее расстояние: 5

> Итерация №3  |  Текущий: 8 -> 12 -> 9
> Отобранный город: 10, расстояние: 2
> Текущее расстояние: 7

> Итерация №4  |  Текущий: 8 -> 12 -> 9 -> 10
> Отобранный город: 11, расстояние: 8
> Текущее расстояние: 15

> Итерация №5  |  Текущий: 8 -> 12 -> 9 -> 10 -> 11
> Отобранный город: 1, расстояние: 8
> Текущее расстояние: 23

> Итерация №6  |  Текущий: 8 -> 12 -> 9 -> 10 -> 11 -> 1
> Отобранный город: 2, расстояние: 3
> Текущее расстояние: 26

> Итерация №7  |  Текущий: 8 -> 12 -> 9 -> 10 -> 11 -> 1 -> 2
> Отобранный город: 5, расстояние: 3
> Текущее расстояние: 29

> Итерация №8  |  Текущий: 8 -> 12 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5
> Отобранный город: 6, расстояние: 5
> Текущее расстояние: 34

> Итерация №9  |  Текущий: 8 -> 12 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6
> Отобранный город: 7, расстояние: 3
> Текущее расстояние: 37

> Итерация №10  |  Текущий: 8 -> 12 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7
> Отобранный город: 0, расстояние: 20
> Текущее расстояние: 57

> Итерация №11  |  Текущий: 8 -> 12 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0
> Отобранный город: 3, расстояние: 3
> Текущее расстояние: 60

> Итерация №12  |  Текущий: 8 -> 12 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0 -> 3
> Отобранный город: 4, расстояние: 5
> Текущее расстояние: 65

> Итерация №13  |  Текущий: 8 -> 12 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0 -> 3 -> 4
> Отобранный город: 13, расстояние: 16
> Текущее расстояние: 81

> Итерация №14  |  Текущий: 8 -> 12 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0 -> 3 -> 4 -> 13
> Отобранный город: 14, расстояние: 1
> Текущее расстояние: 82

Маршрут: 8 -> 12 -> 9 -> 10 -> 11 -> 1 -> 2 -> 5 -> 6 -> 7 -> 0 -> 3 -> 4 -> 13 -> 14
Расстояние: 88
#+END_src

*** Запуск 5

#+BEGIN_src
> Итерация №1  |  Текущий: 6
> Отобранный город: 2, расстояние: 3
> Текущее расстояние: 3

> Итерация №2  |  Текущий: 6 -> 2
> Отобранный город: 1, расстояние: 3
> Текущее расстояние: 6

> Итерация №3  |  Текущий: 6 -> 2 -> 1
> Отобранный город: 11, расстояние: 8
> Текущее расстояние: 14

> Итерация №4  |  Текущий: 6 -> 2 -> 1 -> 11
> Отобранный город: 10, расстояние: 8
> Текущее расстояние: 22

> Итерация №5  |  Текущий: 6 -> 2 -> 1 -> 11 -> 10
> Отобранный город: 9, расстояние: 2
> Текущее расстояние: 24

> Итерация №6  |  Текущий: 6 -> 2 -> 1 -> 11 -> 10 -> 9
> Отобранный город: 8, расстояние: 3
> Текущее расстояние: 27

> Итерация №7  |  Текущий: 6 -> 2 -> 1 -> 11 -> 10 -> 9 -> 8
> Отобранный город: 12, расстояние: 1
> Текущее расстояние: 28

> Итерация №8  |  Текущий: 6 -> 2 -> 1 -> 11 -> 10 -> 9 -> 8 -> 12
> Отобранный город: 13, расстояние: 4
> Текущее расстояние: 32

> Итерация №9  |  Текущий: 6 -> 2 -> 1 -> 11 -> 10 -> 9 -> 8 -> 12 -> 13
> Отобранный город: 14, расстояние: 1
> Текущее расстояние: 33

> Итерация №10  |  Текущий: 6 -> 2 -> 1 -> 11 -> 10 -> 9 -> 8 -> 12 -> 13 -> 14
> Отобранный город: 0, расстояние: 10
> Текущее расстояние: 43

> Итерация №11  |  Текущий: 6 -> 2 -> 1 -> 11 -> 10 -> 9 -> 8 -> 12 -> 13 -> 14 -> 0
> Отобранный город: 3, расстояние: 3
> Текущее расстояние: 46

> Итерация №12  |  Текущий: 6 -> 2 -> 1 -> 11 -> 10 -> 9 -> 8 -> 12 -> 13 -> 14 -> 0 -> 3
> Отобранный город: 4, расстояние: 5
> Текущее расстояние: 51

> Итерация №13  |  Текущий: 6 -> 2 -> 1 -> 11 -> 10 -> 9 -> 8 -> 12 -> 13 -> 14 -> 0 -> 3 -> 4
> Отобранный город: 5, расстояние: 19
> Текущее расстояние: 70

> Итерация №14  |  Текущий: 6 -> 2 -> 1 -> 11 -> 10 -> 9 -> 8 -> 12 -> 13 -> 14 -> 0 -> 3 -> 4 -> 5
> Отобранный город: 7, расстояние: 8
> Текущее расстояние: 78

Маршрут: 6 -> 2 -> 1 -> 11 -> 10 -> 9 -> 8 -> 12 -> 13 -> 14 -> 0 -> 3 -> 4 -> 5 -> 7
Расстояние: 81
#+END_src

** Результаты запусков

| Запуск | Маршрут                                                                                    | Расстояние |
|--------+--------------------------------------------------------------------------------------------+------------|
|      1 | 2 \to 1 \to 6 \to 7 \to 5 \to 0 \to 3 \to 4 \to 12 \to 8 \to 9 \to 10 \to 11 \to 14 \to 13 |         97 |
|      2 | 13 \to 14 \to 12 \to 8 \to 9 \to 10 \to 11 \to 1 \to 2 \to 5 \to 6 \to 7 \to 0 \to 3 \to 4 |         86 |
|      3 | 12 \to 8 \to 9 \to 10 \to 11 \to 1 \to 2 \to 5 \to 6 \to 7 \to 0 \to 3 \to 4 \to 13 \to 14 |         86 |
|      4 | 8 \to 12 \to 9 \to 10 \to 11 \to 1 \to 2 \to 5 \to 6 \to 7 \to 0 \to 3 \to 4 \to 13 \to 14 |         88 |
|      5 | 6 \to 2 \to 1 \to 11 \to 10 \to 9 \to 8 \to 12 \to 13 \to 14 \to 0 \to 3 \to 4 \to 5 \to 7 |         81 |

Лучшее решение: 6 \to 2 \to 1 \to 11 \to 10 \to 9 \to 8 \to 12 \to 13 \to 14 \to 0 \to 3 \to 4 \to 5 \to 7 (81).

* Выводы

Алгоритм начинает формировать решение достаточно хорошо: пока много городов для выбора следующего.
Под конец же, когда городов остаётся немного, алгоритм начинает выбирать достаточно отдалённые города.
Например, в четвёртом запуске c матрицей 15 \times 15:
- на шаге №10 из города 7 алгоритм выбрал город 0 (расстояние 20)
- на шаге №13 из города 4 алгоритм выбрал город 13 (расстояние 16) 

* Исходный код программы

Программа написана на C# 11 (.NET 7).

** Utilities.cs

Содержит вспомогательные функции.

#+INCLUDE: "../Utilities.cs" src csharp

** DistanceMatrix.cs

Класс для хранения матрицы расстояний.

#+INCLUDE: "../DistanceMatrix.cs" src csharp

** ClosestNeighbourMethod.cs

Предоставляет метод для решения ЗК.

#+INCLUDE: "../ClosestNeighbourMethod.cs" src csharp

** Program.cs

#+INCLUDE: "../Program.cs" src csharp
